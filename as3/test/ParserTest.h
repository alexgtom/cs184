#include "gtest/gtest.h"
#include "../base/Parser.h"

class ParserTest : public ::testing::Test {
};

TEST_F(ParserTest, Parse) {
  Parser p;
  vector<BezierPatch> patch_list = p.readFile("../input/test.bez");
  MatrixXf m0(4, 12);
  MatrixXf m1(4, 12);

  m0 << 0.00, 0.00, 0.00,  0.33, 0.00, 0.00,  0.66, 0.00, 0.00,  1.00, 0.00, 0.00,
        0.00, 0.33, 0.00,  0.33, 0.33, 0.00,  0.66, 0.33, 0.00,  1.00, 0.33, 0.00,
        0.00, 0.66, 0.00,  0.33, 0.66, 0.00,  0.66, 0.66, 0.00,  1.00, 0.66, 0.00,
        0.00, 1.00, 0.00,  0.33, 1.00, 0.00,  0.66, 1.00, 0.00,  1.00, 1.00, 0.00;
  m1 << 0.00, 0.00, 0.00,  0.33, 0.00, 2.00,  0.66, 0.00, 2.00,  1.00, 0.00, 0.00,
        0.00, 0.33, 0.00,  0.33, 0.33, 2.00,  0.66, 0.33, 2.00,  1.00, 0.33, 0.00,
        0.00, 0.66, 0.00,  0.33, 0.66, 2.00,  0.66, 0.66, 2.00,  1.00, 0.66, 0.00,
        0.00, 1.00, 0.00,  0.33, 1.00, 2.00,  0.66, 1.00, 2.00,  1.00, 1.00, 0.00;
  
  EXPECT_EQ(m0, patch_list[0].m);
  EXPECT_EQ(m1, patch_list[1].m);
}
